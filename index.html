<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZEROX GOD MODE</title>
<style>
    body { margin:0; background:#000; overflow:hidden; font-family: 'Segoe UI', Arial, sans-serif; color:#00f2ff; }
    
    /* HUD CENTRALIZADO E ESTILIZADO */
    #hud { 
        position:fixed; 
        top:30px; 
        left:50%; 
        transform:translateX(-50%); 
        z-index:10; 
        font-size:24px; 
        text-align:center;
        text-transform: uppercase;
        letter-spacing: 4px;
        text-shadow: 0 0 15px #00f2ff;
        width: 100%;
        font-weight: bold;
    }

    #status { 
        font-size: 14px; 
        margin-top: 10px; 
        color: rgba(0, 242, 255, 0.7);
        text-transform: none;
        letter-spacing: 1px;
    }

    #start { 
        position:fixed; 
        bottom:40px; 
        left:50%; 
        transform:translateX(-50%); 
        padding:20px 50px; 
        background: transparent; 
        color: #00f2ff;
        border: 2px solid #00f2ff;
        font-weight:bold; 
        cursor:pointer; 
        border-radius:50px; 
        box-shadow: 0 0 20px #00f2ff;
        font-size: 18px;
        transition: 0.3s;
    }
    #start:hover { background: #00f2ff; color: #000; }
</style>
</head>
<body>

<div id="hud"> 
    ZEROX V_2
    <div id="status"></div> 
</div>

<button id="start">INICIALIZAR ZERO-X</button>

<video id="webcam" autoplay playsinline style="display:none"></video>
<div id="player"></div>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<script>
// ================= CONFIGURAÇÃO =================
const YOUTUBE_API_KEY = "AIzaSyApmJHahtrbmxS-hsVApE37qmHBVP67Du8"; 

let player, recognition;
let synth = window.speechSynthesis;
let explosionFactor = 1;
let targetExplosion = 1;

function falar(texto){
    synth.cancel();
    let u = new SpeechSynthesisUtterance(texto);
    u.lang = "pt-BR";
    u.rate = 1.1; // Velocidade da voz
    synth.speak(u);
    document.getElementById("status").innerText = "ZERO-X: " + texto;
    document.getElementById("status").style.display = "block";
}

// ================= MOTOR YOUTUBE =================
function onYouTubeIframeAPIReady(){
    player = new YT.Player('player',{
        height:'0', width:'0',
        events:{ 
            onReady: e => e.target.mute(),
            onStateChange: e => {
                if(e.data === 1) targetExplosion = 1.8; // Pulsa leve ao tocar
                else targetExplosion = 1;
            }
        }
    });
}

async function tocar(termoOriginal){
    let termo = termoOriginal.replace(/zero\s?x|zerox|xis/gi,"").trim();
    if(!termo) return;

    falar("Buscando " + termo + " no YouTube.");

    const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=id&q=${encodeURIComponent(termo)}&type=video&maxResults=1&key=${YOUTUBE_API_KEY}`);
    const data = await res.json();

    if(data.items && data.items[0]){
        const id = data.items[0].id.videoId;
        player.loadVideoById(id);
        setTimeout(()=>{
            player.unMute();
            player.setVolume(100);
            player.playVideo();
        },500);
        falar("Tocando agora.");
    } else {
        falar("Não encontrei resultados para " + termo);
    }
}

// ================= CÉREBRO DE RESPOSTAS E CORES =================
function responder(fala){
    console.log("Comando:", fala);
    
    // Abaixa volume para ouvir melhor
    if(player) player.setVolume(20);

    // 1. MUDANÇA DE COR
    if(fala.includes("cor") || fala.includes("ficar")){
        if(fala.includes("vermelho")) { globe.material.color.setHex(0xff0000); falar("Alterando para vermelho."); }
        else if(fala.includes("verde")) { globe.material.color.setHex(0x00ff00); falar("Alterando para verde."); }
        else if(fala.includes("amarelo")) { globe.material.color.setHex(0xffff00); falar("Alterando para amarelo."); }
        else if(fala.includes("azul")) { globe.material.color.setHex(0x00f2ff); falar("Restaurando azul padrão."); }
        else if(fala.includes("branco")) { globe.material.color.setHex(0xffffff); falar("Alterando para branco."); }
        else if(fala.includes("roxo")) { globe.material.color.setHex(0x8a2be2); falar("Alterando para roxo."); }
        
        setTimeout(() => player.setVolume(100), 2000);
        return;
    }

    // 2. COMANDO DE BUSCA/MÚSICA
    if(fala.includes("toca")){
        let musica = fala.split("toca")[1].trim();
        tocar(musica);
    } 
    // 3. COMANDOS DE INTERAÇÃO/RESPOSTA
    else if(fala.includes("quem é você") || fala.includes("o que é você")){
        falar("Eu sou o ZERO-X, seu sistema de inteligência artificial em modo Deus.");
    }
    else if(fala.includes("hora")){
        falar("Agora são " + new Date().toLocaleTimeString());
    }
    else if(fala.includes("quem te criou") || fala.includes("quem é seu dono")){
        falar("Eu fui desenvolvido para servir ao mestre deste sistema.");
    }
    else if(fala.includes("parar") || fala.includes("desligar") || fala.includes("pausa")){
        player.pauseVideo();
        falar("Música interrompida.");
    }
    else if(fala.includes("zerox") || fala.includes("zero x") || fala.includes("xis")){
        falar("Sim? Estou às suas ordens.");
    }

    // Volta o volume depois de falar
    setTimeout(() => { if(player) player.setVolume(100); }, 4000);
}

// ================= SISTEMA DE VOZ =================
function iniciarVoz(){
    const Speech = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new Speech();
    recognition.lang = "pt-BR";
    recognition.continuous = true;
    recognition.onresult = e => {
        const fala = e.results[e.results.length-1][0].transcript.toLowerCase();
        responder(fala);
    };
    recognition.onend = () => recognition.start();
    recognition.start();
}

// ================= GLOBO 3D =================
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
camera.position.z = 5;
const renderer = new THREE.WebGLRenderer({alpha:true, antialias: true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

const geo = new THREE.SphereGeometry(1.6,64,64);
const base = geo.attributes.position.array.slice();
const globe = new THREE.Points(geo, new THREE.PointsMaterial({color:0x00f2ff,size:0.015}));
scene.add(globe);

const pGeo = new THREE.BufferGeometry();
const arr = new Float32Array(1500*3);
for(let i=0;i<arr.length;i++){ arr[i]=(Math.random()-0.5)*20; }
pGeo.setAttribute('position',new THREE.BufferAttribute(arr,3));
const particles = new THREE.Points(pGeo, new THREE.PointsMaterial({size:0.02,color:0x00f2ff}));
scene.add(particles);

// ================= MÃO =================
const hands = new Hands({ locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}` });
hands.setOptions({maxNumHands:1, modelComplexity: 1});

hands.onResults(res=>{
    if(res.multiHandLandmarks && res.multiHandLandmarks[0]){
        const pts = res.multiHandLandmarks[0];
        // Distância entre polegar e dedo médio para detectar palma aberta
        const dist = Math.hypot(pts[0].x-pts[12].x, pts[0].y-pts[12].y);
        if(dist > 0.45) targetExplosion = 4.5; // Explosão máxima
        else targetExplosion = 1.2;
    } else {
        targetExplosion = 1;
    }
});

function iniciarHand(){
    const cam = new Camera(document.getElementById("webcam"),{
        onFrame: async ()=>{ await hands.send({image:webcam}); },
        width: 640, height: 480
    });
    cam.start();
}

// ================= ANIMAÇÃO =================
let pulse = 1;
function animate(){
    requestAnimationFrame(animate);
    pulse += 0.05;
    explosionFactor += (targetExplosion - explosionFactor)*0.08;
    const attr = globe.geometry.attributes.position;
    for(let i=0;i<attr.count;i++){
        const scale = explosionFactor + Math.sin(i+pulse)*0.05;
        attr.setXYZ(i, base[i*3]*scale, base[i*3+1]*scale, base[i*3+2]*scale);
    }
    attr.needsUpdate = true;
    globe.rotation.y += 0.003;
    particles.rotation.y += 0.0005;
    renderer.render(scene,camera);
}
animate();

// ================= START =================
document.getElementById("start").onclick = ()=>{
    document.getElementById("start").style.display = "none";
    falar("Zero Xis ativado. Aguardando comandos.");
    iniciarVoz();
    iniciarHand();
    if(player) player.unMute();
};
</script>
</body>
</html>
