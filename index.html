<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>ZER0X GOD MODE</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
body {
  margin:0;
  overflow:hidden;
  background:black;
  font-family:Arial;
}

#globeCanvas {
  position:absolute;
  top:0;
  left:0;
  z-index:1;
}

#webcam {
  position:absolute;
  bottom:20px;
  right:20px;
  width:200px;
  border:2px solid #00ffff;
  z-index:3;
}

#player {
  position:absolute;
  top:20px;
  left:20px;
  z-index:3;
}

#ui {
  position:absolute;
  top:20px;
  right:20px;
  z-index:4;
}

button {
  padding:10px;
  background:#00ffff;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<canvas id="globeCanvas"></canvas>
<video id="webcam" autoplay playsinline></video>

<div id="player"></div>

<div id="ui">
  <button onclick="startMusic()">INICIAR ZER0X</button>
</div>

<script>
/* =========================
   ðŸŒ GLOBO 3D
========================= */
const canvas = document.getElementById("globeCanvas");
const renderer = new THREE.WebGLRenderer({canvas});
renderer.setSize(window.innerWidth, window.innerHeight);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight,0.1,1000);
camera.position.z = 3;

const geometry = new THREE.SphereGeometry(1,64,64);
const material = new THREE.MeshBasicMaterial({
  wireframe:true,
  color:0x00ffff
});
const globe = new THREE.Mesh(geometry, material);
scene.add(globe);

let handX = 0;
let handY = 0;

/* =========================
   ðŸ¤š CONTROLE (mouse = mÃ£o fake)
========================= */
window.addEventListener("mousemove", (e)=>{
  handX = (e.clientX / window.innerWidth - 0.5) * 2;
  handY = (e.clientY / window.innerHeight - 0.5) * 2;
});

/* =========================
   ðŸ”„ LOOP DO GLOBO
========================= */
function animateGlobe(){
  requestAnimationFrame(animateGlobe);

  globe.rotation.y += 0.01 + handX * 0.05;
  globe.rotation.x += handY * 0.02;

  renderer.render(scene, camera);
}
animateGlobe();

/* =========================
   ðŸŽ¥ WEBCAM
========================= */
navigator.mediaDevices.getUserMedia({video:true})
.then(stream=>{
  document.getElementById("webcam").srcObject = stream;
});

/* =========================
   ðŸŽµ YOUTUBE PLAYER
========================= */
let player;
let playlist = [
  "kXYiU_JCYtU", // linkin park
  "hTWKbfoikeg", // nirvana
  "3JZ4pnNtyxQ"  // eminem
];

let current = 0;

function onYouTubeIframeAPIReady(){
  player = new YT.Player('player', {
    height: '200',
    width: '300',
    videoId: playlist[0],
    events: {
      'onStateChange': onPlayerStateChange
    }
  });
}

function onPlayerStateChange(event){
  if(event.data === YT.PlayerState.ENDED){
    nextMusic();
  }
}

function nextMusic(){
  current++;
  if(current >= playlist.length){
    current = 0;
  }
  player.loadVideoById(playlist[current]);
}

function startMusic(){
  player.playVideo();
}

/* =========================
   ðŸ”¥ CARREGA API YOUTUBE
========================= */
let tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

</script>

</body>
</html>
